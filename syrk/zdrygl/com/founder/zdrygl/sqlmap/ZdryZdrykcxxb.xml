<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
				"http://ibatis.apache.org/dtd/sql-map-2.dtd">


<!-- 不使用namespace的话sql搜索定位会比较方便 -->
<sqlMap namespace="ZdryZdrykcxxb">

    <typeAlias alias="zdryZdrykcxxb" type="com.founder.zdrygl.bean.ZdryZdrykcxxb" />
	
	<!-- 用于select查询公用抽取的列 -->
	<sql id="columns">
	    <![CDATA[
		ID,ZDRYID,KCZQDM,KCNF,KCJD,KCYF,KCQK,KCMJID,KCMJXM,KC_SJ,BZ,XT_CJSJ,XT_LRSJ,XT_LRRXM,XT_LRRID,XT_LRRBM,XT_LRRBMID,XT_LRIP,XT_ZHXGSJ,XT_ZHXGRXM,XT_ZHXGRID,XT_ZHXGRBM,XT_ZHXGRBMID,XT_ZHXGIP,XT_ZXBZ,XT_ZXYY
	    ]]>
	</sql>

	<!-- useGeneratedKeys="true" keyProperty="xxx" for sqlserver and mysql -->



    <sql id="insertColumns">
		    <isNotEmpty  property="id">ID</isNotEmpty>
		    <isNotEmpty prepend="," property="zdryid">ZDRYID</isNotEmpty>
		    <isNotEmpty prepend="," property="kczqdm">KCZQDM</isNotEmpty>
		    <isNotEmpty prepend="," property="kcnf">KCNF</isNotEmpty>
		    <isNotEmpty prepend="," property="kcjd">KCJD</isNotEmpty>
		    <isNotEmpty prepend="," property="kcyf">KCYF</isNotEmpty>
		    <isNotEmpty prepend="," property="kcqk">KCQK</isNotEmpty>
		    <isNotEmpty prepend="," property="kcmjid">KCMJID</isNotEmpty>
		    <isNotEmpty prepend="," property="kcmjxm">KCMJXM</isNotEmpty>
		    <isNotEmpty prepend="," property="kc_sj">KC_SJ</isNotEmpty>
		    <isNotEmpty prepend="," property="bz">BZ</isNotEmpty>
		    ,
			<include refid="insertXtzd"/>
	</sql>

	<sql id="insertColumnsValues">
			<isNotEmpty property="id">#id#</isNotEmpty>
			<isNotEmpty prepend="," property="zdryid">#zdryid#</isNotEmpty>
			<isNotEmpty prepend="," property="kczqdm">#kczqdm#</isNotEmpty>
			<isNotEmpty prepend="," property="kcnf">#kcnf#</isNotEmpty>
			<isNotEmpty prepend="," property="kcjd">#kcjd#</isNotEmpty>
			<isNotEmpty prepend="," property="kcyf">#kcyf#</isNotEmpty>
			<isNotEmpty prepend="," property="kcqk">#kcqk#</isNotEmpty>
			<isNotEmpty prepend="," property="kcmjid">#kcmjid#</isNotEmpty>
			<isNotEmpty prepend="," property="kcmjxm">#kcmjxm#</isNotEmpty>
			<isNotEmpty prepend="," property="kc_sj">#kc_sj#</isNotEmpty>
			<isNotEmpty prepend="," property="bz">#bz#</isNotEmpty>
			,
			<include refid="insertXtzdVal"/>
	</sql>

	<insert id="save" parameterClass="zdryZdrykcxxb">
		INSERT INTO ZDRY_ZDRYKCXXB (
		<include refid="insertColumns"/>
		) VALUES (
		<include refid="insertColumnsValues"/>
		)
	</insert>
    


	<sql id="updateColumns">
		<dynamic prepend="set">
	       <isNotNull prepend="," property="zdryid">ZDRYID = #zdryid#</isNotNull>
	       <isNotNull prepend="," property="kczqdm">KCZQDM = #kczqdm#</isNotNull>
	       <isNotNull prepend="," property="kcnf">KCNF = #kcnf#</isNotNull>
	       <isNotNull prepend="," property="kcjd">KCJD = #kcjd#</isNotNull>
	       <isNotNull prepend="," property="kcyf">KCYF = #kcyf#</isNotNull>
	       <isNotNull prepend="," property="kcqk">KCQK = #kcqk#</isNotNull>
	       <isNotNull prepend="," property="kcmjid">KCMJID = #kcmjid#</isNotNull>
	       <isNotNull prepend="," property="kcmjxm">KCMJXM = #kcmjxm#</isNotNull>
	       <isNotNull prepend="," property="kc_sj">KC_SJ = #kc_sj#</isNotNull>
	       <isNotNull prepend="," property="bz">BZ = #bz#</isNotNull>,
			<include refid="updateXtzd"/>
		</dynamic>
	</sql>

	<update id="update" >
		UPDATE ZDRY_ZDRYKCXXB
		<include refid="updateColumns"/>
		WHERE ID = #id#
	</update>

		<!-- 注销 -->
    <update id="delete" parameterClass="zdryZdrykcxxb">
       <![CDATA[ update ZDRY_ZDRYKCXXB set ]]><include refid="deleteXtzd"/><![CDATA[ where ID = #id# ]]>
    </update>
    
    <select id="queryById" resultClass="zdryZdrykcxxb">
		SELECT <include refid="columns" />
	    <![CDATA[
		    FROM ZDRY_ZDRYKCXXB 
	        WHERE 
		        ID = #id# 
	    ]]>
	</select>
	
	<sql id="queryWhere">
		<!-- ognl访问静态方法的表达式 为@class@method(args),以下为调用rapid中的Ognl.isNotEmpty()方法,还有其它方法如isNotBlank()可以使用，具体请查看Ognl类 -->
		<dynamic prepend="where">
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.id">
				AND ID = #zdryZdrykcxxbVO.id#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.zdryid">
				AND ZDRYID = #zdryZdrykcxxbVO.zdryid#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.kczqdm">
				AND KCZQDM = #zdryZdrykcxxbVO.kczqdm#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.kcnf">
				AND KCNF = #zdryZdrykcxxbVO.kcnf#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.kcjd">
				AND KCJD = #zdryZdrykcxxbVO.kcjd#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.kcyf">
				AND KCYF = #zdryZdrykcxxbVO.kcyf#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.kcqk">
				AND KCQK = #zdryZdrykcxxbVO.kcqk#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.kcmjid">
				AND KCMJID = #zdryZdrykcxxbVO.kcmjid#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.kcmjxm">
				AND KCMJXM = #zdryZdrykcxxbVO.kcmjxm#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.kc_sj">
				AND KC_SJ = #zdryZdrykcxxbVO.kc_sj#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.bz">
				AND BZ = #zdryZdrykcxxbVO.bz#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_cjsj">
				AND XT_CJSJ = #zdryZdrykcxxbVO.xt_cjsj#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_lrsj">
				AND XT_LRSJ = #zdryZdrykcxxbVO.xt_lrsj#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_lrrxm">
				AND XT_LRRXM = #zdryZdrykcxxbVO.xt_lrrxm#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_lrrid">
				AND XT_LRRID = #zdryZdrykcxxbVO.xt_lrrid#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_lrrbm">
				AND XT_LRRBM = #zdryZdrykcxxbVO.xt_lrrbm#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_lrrbmid">
				AND XT_LRRBMID = #zdryZdrykcxxbVO.xt_lrrbmid#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_lrip">
				AND XT_LRIP = #zdryZdrykcxxbVO.xt_lrip#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_zhxgsj">
				AND XT_ZHXGSJ = #zdryZdrykcxxbVO.xt_zhxgsj#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_zhxgrxm">
				AND XT_ZHXGRXM = #zdryZdrykcxxbVO.xt_zhxgrxm#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_zhxgrid">
				AND XT_ZHXGRID = #zdryZdrykcxxbVO.xt_zhxgrid#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_zhxgrbm">
				AND XT_ZHXGRBM = #zdryZdrykcxxbVO.xt_zhxgrbm#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_zhxgrbmid">
				AND XT_ZHXGRBMID = #zdryZdrykcxxbVO.xt_zhxgrbmid#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_zhxgip">
				AND XT_ZHXGIP = #zdryZdrykcxxbVO.xt_zhxgip#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_zxbz">
				AND XT_ZXBZ = #zdryZdrykcxxbVO.xt_zxbz#
			</isNotEmpty>
	       <isNotEmpty prepend="and" property="zdryZdrykcxxb.xt_zxyy">
				AND XT_ZXYY = #zdryZdrykcxxbVO.xt_zxyy#
			</isNotEmpty>
		</dynamic>
	</sql>
		
    <select id="queryCount" resultClass="Integer">
        SELECT count(*) FROM ZDRY_ZDRYKCXXB 
		<include refid="queryWhere"/>
    </select>
    
    <!--
    	分页查询已经使用Dialect进行分页,也可以不使用Dialect直接编写分页
    	因为分页查询将传 offset,pageSize,lastRows 三个参数,不同的数据库可以根于此三个参数属性应用不同的分页实现
    -->
    <select id="query" resultClass="zdryZdrykcxxb">
    	SELECT <include refid="columns" />
	    FROM ZDRY_ZDRYKCXXB 
		<include refid="queryWhere"/>
		
		<isNotEmpty prepend="and" property="page.sort">
			ORDER BY '$sort$'
		</isNotEmpty>
    </select>

	<!-- 查询显示列表 -->
	<select id="queryViewList" parameterClass="Map" resultClass="zdryZdrykcxxb">
		<![CDATA[ select * from (
			select * from ZDRY_ZDRYKCXXB t where t.XT_ZXBZ = '0' and ZDRYID = #zdryid# ]]>
		<![CDATA[ order by xt_cjsj desc) m where rownum <= #maxNum# ]]>
	</select>

	
</sqlMap>

